---
# Default
user: deploy
user_home_directory: '/home/{{ user }}'

# Users and ZSH
sudo_users:
  - name: '{{ user }}'
    nopasswd: yes

users:
  - username: '{{ user }}'
    name: '{{ user }}'
    groups: ['sudo']
    authorized_keys: []
    oh_my_zsh:
      theme: agnoster
      plugins: git zsh-syntax-highlighting

# Passenger
passenger_webserver: nginx

# RVM and Ruby
rvm1_rvm_version: 'stable'
rvm1_rvm_check_for_updates: True
rvm1_install_path: '/home/{{ ansible_ssh_user }}/.rvm'
rvm1_rubies:
  - 'ruby-2.3.0'
rvm1_install_flags: '--auto-dotfiles --user-install'

# PHP FPM
php_fpm_socket: /var/run/php5-fpm.sock
php_fpm_pools:
 - name: www
   listen.owner: www-data
   listen.group: www-data
   listen.mode: '0660'
   user: www-data
   group: www-data
   listen: '{{ php_fpm_socket }}'
   chdir: /

# MySQL
mysql_root_password: root
mysql_databases:
  - name: '{{ user }}_production'
    import_file: ~
mysql_users:
  - name: '{{ user }}'
    password: '{{ user }}'
    privileges: "{{ user }}_demo.*:ALL"

# PhpMyAdmin
install_phpmyadmin: false
phpmyadmin_server_host: localhost
phpmyadmin_server_auth_type: config
phpmyadmin_php_fpm_socket: 'unix:{{ php_fpm_socket }}'

# Adminer
install_adminer: true
adminer_install_dir: /usr/share/adminer
adminer_install_filename: adminer.php
adminer_symlink_dirs:
  - /usr/share/nginx/html
adminer_theme: pappu687

# NodeJS
nodejs_version: 5

# Timezone and locale
timezone: 'Europe/Paris'
environment_config:
  LC_ALL: en_US.UTF-8

# UFW [Security]
ufw_rules:
  - { port: 3306, proto: 'tcp', rule: allow } # MySQL
  - { port: 5432, proto: 'tcp', rule: allow } # PostgreSQL
  - { port: 11211, proto: 'tcp', rule: allow } # Memcached
ufw_applications:
  - { name: 'OpenSSH', rule: allow }
  - { name: 'Nginx Full', rule: allow }

# Fail2ban [Security]
fail2ban_jail:
  ssh:
    enabled: true
    port: ssh
    filter: sshd
    logpath: /var/log/auth.log
    maxretry: 6
fail2ban_jail_template: ~

fail2ban_fix:
  email_notifier: root@locahost.com
  slack_notifier: false
  slack_username: Fail2Ban
  slack_channel: ~
  slack_hook: ~

# Backup manager
elao_backup_manager_configs_template:  configs/base.conf.j2
elao_backup_manager_configs_dir: /etc
elao_backup_manager_configs:
  - template: configs/base.conf.j2
    file: backup-manager.conf
